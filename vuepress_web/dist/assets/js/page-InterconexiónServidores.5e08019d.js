(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{473:function(a,s,e){a.exports=e.p+"assets/img/1-psql-psql.2b74a9a9.png"},474:function(a,s,e){a.exports=e.p+"assets/img/2-psql-psql.168e6bee.png"},475:function(a,s,e){a.exports=e.p+"assets/img/3-psql-psql.f53d78d6.png"},476:function(a,s,e){a.exports=e.p+"assets/img/4-psql-psql.8ca298c3.png"},477:function(a,s,e){a.exports=e.p+"assets/img/5-psql-psql.75a267d8.png"},478:function(a,s,e){a.exports=e.p+"assets/img/6-psql-psql.1d41a99f.png"},479:function(a,s,e){a.exports=e.p+"assets/img/1-psql-orcl.00d64948.png"},538:function(a,s,e){"use strict";e.r(s);var r=e(1),t=Object(r.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"interconexion-servidores"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#interconexion-servidores"}},[a._v("#")]),a._v(" Interconexión Servidores")]),a._v(" "),s("h2",{attrs:{id:"oracle-oracle"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#oracle-oracle"}},[a._v("#")]),a._v(" Oracle - Oracle")]),a._v(" "),s("h2",{attrs:{id:"postgresql-postgresql"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#postgresql-postgresql"}},[a._v("#")]),a._v(" PostgreSQL - PostgreSQL")]),a._v(" "),s("p",[a._v("Aqui vamos a interconectar dos servidores Postgres. Yo tendre dos maquinas las cuales son postgres1(192.168.122.27) y postgres2(192.168.122.53)")]),a._v(" "),s("p",[s("font",{attrs:{color:"#800080"}},[s("strong",[a._v("Paso 1")])]),a._v(" Permitir acceso remoto")],1),a._v(" "),s("p",[a._v("Para permitir el acceso remoto nos iremos al fichero postgresql.conf")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("sudo nano /etc/postgresql/13/main/postgresql.conf\n")])])]),s("p",[a._v("Donde editaremos las linea de "),s("code",[a._v("listen_addresses")]),a._v(". Y la dejaremos así:")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("listen_addresses = '*'          # what IP address(es) to listen on;\n")])])]),s("p",[a._v("Despues nos iremos al fichero pg_hba.conf")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("sudo nano /etc/postgresql/13/main/pg_hba.conf\n")])])]),s("p",[a._v("Y escribiremos al final de este fichero las siguientes lineas:")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("host    all     all     0.0.0.0/0       md5\nhost    all     all     ::/0    md5\n")])])]),s("p",[a._v("Una vez hecho esto reiniriaremos el servicio postgresql")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("sudo systemctl restart postgresql\n")])])]),s("p",[s("strong",[a._v("Este paso lo haremos en las dos maquinas")])]),a._v(" "),s("p",[s("font",{attrs:{color:"#800080"}},[s("strong",[a._v("Paso 2")])]),a._v(" Crearemos las bases de datos y sus respectivas tablas")],1),a._v(" "),s("p",[s("strong",[a._v("postgres1")])]),a._v(" "),s("p",[a._v("Primero entraremos al usuario postgres")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("sudo su\n")])])]),s("hr"),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("su postgres\n")])])]),s("hr"),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("psql\n")])])]),s("p",[a._v("Una vez dentro crearemos el usuario y la base de datos:")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("postgres=# create user maquina1 with password 'root';\n")])])]),s("hr"),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("postgres=# create database db1;\n")])])]),s("hr"),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("postgres=# grant all privileges on database db1 to maquina1;\n")])])]),s("hr"),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("postgres=# \\q\n")])])]),s("p",[a._v("Una vez ya creados el usuario y la base de datos entraremos en ella para crear las tablas:")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("psql -h localhost -U maquina1 -W -d db1\n")])])]),s("hr"),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("db1=> create table peliculas (\n    NombrePelicula varchar (20),\n    Genero varchar (20),\n    Director varchar (20),\n    AnoEstreno varchar (4),\n    constraint PK_1 primary key (NombrePelicula)\n);\n")])])]),s("hr"),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("db1=> INSERT INTO peliculas VALUES ('Dune','Ciencia-ficcion','Edwards','1984');\nINSERT INTO peliculas VALUES ('Los Idiotas','Drama','Von Trier','1999');\nINSERT INTO peliculas VALUES ('Kramer vs Kramer','Drama','Smith','1978');\nINSERT INTO peliculas VALUES ('Mision Imposible','Ciencia-ficcion','Johnson','1998');\nINSERT INTO peliculas VALUES ('Mi nombre es Joe','Drama','Loach','1995');\nINSERT INTO peliculas VALUES ('Rompiendo las olas','Drama','Von Trier','1997');\nINSERT INTO peliculas VALUES ('Los Otros','Suspense','Amenabar','2001');\n")])])]),s("p",[s("img",{attrs:{src:e(473),alt:"image"}})]),a._v(" "),s("p",[s("strong",[a._v("postgres2")])]),a._v(" "),s("p",[a._v("Ahora haremos lo mismo con la otra maquina")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("sudo su\n")])])]),s("hr"),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("su postgres\n")])])]),s("hr"),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("psql\n")])])]),s("p",[a._v("Una vez dentro crearemos el usuario y la base de datos:")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("postgres=# create user maquina2 with password 'root';\n")])])]),s("hr"),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("postgres=# create database db2;\n")])])]),s("hr"),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("postgres=# grant all privileges on database db2 to maquina2;\n")])])]),s("hr"),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("postgres=# \\q\n")])])]),s("p",[a._v("Una vez ya creados el usuario y la base de datos entraremos en ella para crear las tablas:")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("psql -h localhost -U maquina2 -W -d db2\n")])])]),s("hr"),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("db1=> create table socios (\n    DNI varchar (10),\n    Nombre varchar (20),\n    Direccion varchar (20),\n    constraint PK_2 primary key (DNI)\n);\n")])])]),s("hr"),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("db1=> INSERT INTO socios VALUES ('111-A','David','Sevilla Este');\nINSERT INTO socios VALUES ('222-B','Mariano','Los Remedios');\nINSERT INTO socios VALUES ('333-C','Raul','Triana');\nINSERT INTO socios VALUES ('444-D','Rocio','La Oliva');\nINSERT INTO socios VALUES ('555-E','Marilo','Triana');\nINSERT INTO socios VALUES ('666-F','Benjamin','Montequinto');\nINSERT INTO socios VALUES ('777-G','Carlos','Los Remedios');\nINSERT INTO socios VALUES ('888-H','Manolo','Montequinto');\n")])])]),s("p",[s("img",{attrs:{src:e(474),alt:"image"}})]),a._v(" "),s("p",[s("font",{attrs:{color:"#800080"}},[s("strong",[a._v("Paso 3")])]),a._v(" Interconexiones")],1),a._v(" "),s("p",[s("strong",[a._v("postgres1")])]),a._v(" "),s("p",[a._v("Primero entraremos en la base de datos para crear la extension del link. Esto lo haremos en el usuario postgres")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("psql -d db1\n")])])]),s("hr"),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("db1=# create extension dblink;\n")])])]),s("hr"),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("db1=# \\q\n")])])]),s("p",[s("img",{attrs:{src:e(475),alt:"image"}})]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("psql -h localhost -U maquina1 -W -d db1\n")])])]),s("hr"),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("db1=> select * from dblink('dbname=db2 host=192.168.122.53 user=maquina2 password=root', 'select * from socios') as socios (dni varchar, nombre varchar, direccion varchar);\n")])])]),s("p",[s("img",{attrs:{src:e(476),alt:"image"}})]),a._v(" "),s("p",[s("strong",[a._v("postgres2")])]),a._v(" "),s("p",[a._v("Repitiremos loas pasos pero ahora en la otra maquina")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("psql -d db2\n")])])]),s("hr"),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("db1=# create extension dblink;\n")])])]),s("hr"),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("db1=# \\q\n")])])]),s("p",[s("img",{attrs:{src:e(477),alt:"image"}})]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("psql -h localhost -U maquina2 -W -d db2\n")])])]),s("hr"),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("db2=> select * from dblink('dbname=db1 host=192.168.122.27 user=maquina1 password=root', 'select * from peliculas') as peliculas (nombrepelicula varchar, genero varchar, director varchar, anoestreno varchar);\n")])])]),s("p",[s("img",{attrs:{src:e(478),alt:"image"}})]),a._v(" "),s("p",[a._v("Como podemos comprobar ya podemos realizar interconexiones entre ambas maquinas.")]),a._v(" "),s("h2",{attrs:{id:"oracle-postgresql"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#oracle-postgresql"}},[a._v("#")]),a._v(" Oracle - PostgreSQl")]),a._v(" "),s("h2",{attrs:{id:"postgresql-oracle"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#postgresql-oracle"}},[a._v("#")]),a._v(" PostgreSQL - Oracle")]),a._v(" "),s("p",[s("font",{attrs:{color:"#800080"}},[s("strong",[a._v("Paso 1")])]),a._v(" Instalamos la paquetería requerida")],1),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("sudo apt install libaio1 postgresql-server-dev-all build-essential git\n")])])]),s("p",[s("font",{attrs:{color:"#800080"}},[s("strong",[a._v("Paso 2")])]),a._v(" Descargamos los paquetes clientes de Oracle")],1),a._v(" "),s("p",[a._v("Accedemos al usuario de postgres y descargamos los paquetes del sitio oficial de Oracle:")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("su - postgres\n")])])]),s("hr"),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("wget https://download.oracle.com/otn_software/linux/instantclient/211000/instantclient-basic-linux.x64-21.1.0.0.0.zip\n")])])]),s("hr"),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("wget https://download.oracle.com/otn_software/linux/instantclient/211000/instantclient-sdk-linux.x64-21.1.0.0.0.zip\n")])])]),s("hr"),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("wget https://download.oracle.com/otn_software/linux/instantclient/211000/instantclient-sqlplus-linux.x64-21.1.0.0.0.zip\n")])])]),s("p",[a._v("Descomprimiremos los archivos con unzip:")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("unzip instantclient-basic-linux.x64-21.1.0.0.0.zip\n")])])]),s("hr"),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("unzip instantclient-sqlplus-linux.x64-21.1.0.0.0.zip\n")])])]),s("hr"),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("unzip instantclient-sdk-linux.x64-21.1.0.0.0.zip\n")])])]),s("p",[a._v("Despues de descomprimir los 3 archivos se nos creará una carpeta llamada "),s("code",[a._v("instantclient_21_1")]),a._v(".")]),a._v(" "),s("p",[s("font",{attrs:{color:"#800080"}},[s("strong",[a._v("Paso 3")])]),a._v(" Estableceremos las nuevas variables de entorno")],1),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("export ORACLE_HOME=/var/lib/postgresql/instantclient_21_1\n")])])]),s("hr"),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$ORACLE_HOME\n")])])]),s("hr"),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("export PATH=$PATH:$ORACLE_HOME\n")])])]),s("p",[a._v("Para comprobar si hemos puesto correctamente las variables utilizaremos el comando wich que nos deberá devolver la ruta.")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("cd /var/lib/\n")])])]),s("hr"),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("which sqlplusç\n")])])]),s("p",[s("img",{attrs:{src:e(479),alt:"image"}})]),a._v(" "),s("p",[a._v("Y una vez hecho esto ya nos podremos conectar:")]),a._v(" "),s("p",[a._v("![image]")]),a._v(" "),s("p",[a._v("¡Gracias!")])])}),[],!1,null,null,null);s.default=t.exports}}]);